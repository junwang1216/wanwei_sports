!function(e,o){var t={opts:{URL:"/office/getTrainsCourseList"},init:function(){this.initEvents()},initEvents:function(){function t(t){e("#add_course_modal").find("#course_id").val(t.id||""),e("#add_course_modal").find("#course_no").val(t.courseNo||o().format("YYYYMMDDHHmmss")),e("#add_course_modal").find("#course_name").val(t.courseName||""),e("#add_course_modal").find("#course_remark").val(t.courseRemark||""),2==t.courseStatus?e("#add_course_modal").find("#course_status2").prop("checked",!0):e("#add_course_modal").find("#course_status1").prop("checked",!0)}var i=this;e(".course-filter").on("click",function(o){o.preventDefault();var t=e("#course_filter_form").serialize();location.assign(i.opts.URL+"?"+t)}),e(".page-first, .page-prev, .page-index, .page-next, .page-last").on("click",function(o){o.preventDefault();var t=location.search,a=e(this).attr("data-index");t?t.indexOf("page=")==-1?location.assign(i.opts.URL+"?"+t+"&page="+a):location.assign(i.opts.URL+"?"+t.replace(/(page=)\d+/,"$1"+a)):location.assign(i.opts.URL+"?page="+a)}),e(".course-list").on("click",".course-view",function(o){o.preventDefault();var i=e(this).attr("data-id");e.post("office/viewTrainsCourseInfo",{courseId:i},function(o){var i=o.data;1==o.code?t(i):(e.logConsole("查询课程详情失败",o.message),e.tipsWarningAlert("查询课程详情失败"))})}),e(".course-list").on("click",".course-delete",function(o){o.preventDefault();var t=e(this).attr("data-id");e.post("office/deleteTrainsCourseInfo",{courseId:t},function(o){o.data;1==o.code?location.reload():(e.logConsole("删除课程详情失败",o.message),e.tipsWarningAlert("删除课程详情失败"))})}),e(".course-add").on("click",function(e){e.preventDefault(),t({})}),e(".course-confirm").on("click",function(o){o.preventDefault();var t=e("#course_form"),i=t.serialize();return!("submitting"===t.attr("submitting")||!t.valid())&&(t.attr("submitting","submitting"),void e.post("office/saveTrainsCourseInfo",i,function(o){t.attr("submitting",""),1==o.code?location.reload():(e.logConsole("课程信息保存失败",o.message),e.tipsWarningAlert("课程信息保存失败"))}))})}};t.init()}(jQuery,moment);