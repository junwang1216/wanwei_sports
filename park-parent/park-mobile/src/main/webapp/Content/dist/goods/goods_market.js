!function(t){var o={opts:{data:{}},calCartCount:function(){t.post("/good/getCartCount",{},function(o){var n=o.data;1==o.code&&t(".good-cart-count").find(".badge").html(n.cartCount)})},init:function(){this.initEvents(),this.calCartCount();var o=location.search.replace("?goodType=","");t(".good-type-list").find('[data-type="'+o+'"]').addClass("btn-warning").removeClass("btn-primary")},initEvents:function(){var o=this,n=t(".goods-buy-list"),a=t(".good-cart-count");n.on("click",".good-cart-add",function(n){n.preventDefault();var a=t(this),i=a.attr("data-id");t.post("/good/addGoodsToCart",{goodId:i,amount:1},function(n){return 1!=n.code?(t.logConsole("添加购物车失败",n.message),t.tipsWarningAlert("添加购物车失败"),!1):void o.calCartCount()})}),a.on("click",function(t){t.preventDefault(),location.assign("/good/getGoodsCart")})}};o.init()}(jQuery);