!function(e){var t={init:function(){e.datetimepicker.setLocale("zh"),e("#member_birthday").datetimepicker({timepicker:!1,lang:"zh",format:"Y-m-d",defaultDate:new Date,maxDate:0}),e(".member-birthday-select").on("click",function(t){t.preventDefault(),e("#member_birthday").datetimepicker("show")}),this.initEvents()},initEvents:function(){e("#member_idcard").on("change",function(t){t.preventDefault();var i=e(this).val(),r=i.replace(/^\d{6}(\d{4})(\d{2})(\d{2})[0-9xX]{4}$/,"$1-$2-$3"),n=i.replace(/^\d{16}(\d{1})[0-9xX]{1}$/,"$1");e("#member_birthday").val(r),e("[name='memberSex'][value='"+(n%2?1:2)+"']").prop("checked",!0)}),e(".register-member").on("click",function(t){t.preventDefault();var i=e(this).button("loading"),r=e("#member_form"),n=r.serialize();return!("submitting"==r.attr("submitting")||!r.valid())&&(r.attr("submitting","submitting"),void e.post("/member/saveMember",n,function(t){var a=t.data;return 1!=t.code?(e.logConsole("教师信息注册失败",t.message),void e.tipsWarningAlert("教师信息注册失败")):(e('[name="memberId"]').val(a.memberId),n=r.serialize(),void e.post("/member/saveMemberCar",n,function(t){r.attr("submitting",""),1==t.code?e.tipsSuccessAlert("教师注册成功！",function(){location.assign("/teachers/list")}):(e.logConsole("教师绑卡失败",t.message),e.tipsWarningAlert("教师绑卡失败")),i.button("reset")}))}))})}};t.init()}(jQuery);