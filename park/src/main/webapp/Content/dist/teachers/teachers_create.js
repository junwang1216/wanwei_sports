!function(e){var t={init:function(){e.datetimepicker.setLocale("zh"),e("#member_birthday").datetimepicker({timepicker:!1,lang:"zh",format:"Y-m-d",defaultDate:new Date,maxDate:0}),e(".member-birthday-select").on("click",function(t){t.preventDefault(),e("#member_birthday").datetimepicker("show")}),this.initEvents()},initEvents:function(){e("#member_idcard").on("change",function(t){t.preventDefault();var i=e(this).val();e("#member_birthday").val(i.replace(/\d{6}(\d{4})(\d{2})(\d{2})\d{4}/,"$1-$2-$3")),e("[name='memberSex'][value='"+i.replace(/\d{16}(\d{1})\d{1}/,"$1")+"']").prop("checked",!0)}),e(".register-member").on("click",function(t){t.preventDefault();var i=e("#member_form"),a=i.serialize();return!("submitting"==i.attr("submitting")||!i.valid())&&(i.attr("submitting","submitting"),void e.post("/member/saveMember",a,function(t){var r=t.data;return 1!=t.code?(console.log(t.message||"教师信息注册失败, 请稍后重试"),void alert(t.message||"教师信息注册失败, 请稍后重试")):(e('[name="memberId"]').val(r.memberId),a=i.serialize(),void e.post("/member/saveMemberCar",a,function(t){i.attr("submitting",""),1==t.code?(e("#tips_success_modal").modal({show:!0,backdrop:!1}),setTimeout(function(){e("#tips_success_modal").modal("hide"),location.assign("/teachers/list")},3e3)):(console.log(t.message||"教师绑卡失败, 请稍后重试"),alert(t.message||"教师绑卡失败, 请稍后重试"))}))}))})}};t.init()}(jQuery);