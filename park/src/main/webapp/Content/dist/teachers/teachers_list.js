!function(e){var t={opts:{URL:"/teachers/list"},init:function(){this.initEvents()},initEvents:function(){var t=this;e(".member-filter").on("click",function(a){a.preventDefault();var r=e("#member_filter_form").serialize();location.assign(t.opts.URL+"?"+r)}),e(".page-first, .page-prev, .page-index, .page-next, .page-last").on("click",function(a){a.preventDefault();var r=location.search,i=e(this).attr("data-index");r?r.indexOf("page=")==-1?location.assign(t.opts.URL+"?"+r+"&page="+i):location.assign(t.opts.URL+"?"+r.replace(/(page=)\d+/,"$1"+i)):location.assign(t.opts.URL+"?page="+i)}),e(".teachers-list").on("click",".teachers-refresh",function(){var t=e(this);e("#refresh_cardId").val(t.attr("data-cardId")),e("#refresh_cardNo").val(t.attr("data-cardNo")),e.post("/teachers/getNewCardNo",function(t){var a=t.data;1==t.code?e("#refresh_newNo").val(a.newCardNo):(e.logConsole("新会员卡号生成失败",res1.message),e.tipsWarningAlert("新会员卡号生成失败"))})}),e(".confirm-refresh").on("click",function(t){t.preventDefault();var a=e(this).button("loading"),r=e("#refresh_form"),i=r.serialize();return""===e("#refresh_cardId").val()?(alert("请先选择会员卡"),!1):!("submitting"==r.attr("submitting")||!r.valid())&&(r.attr("submitting","submitting"),void e.post("/teachers/teacherCardBuBan",i,function(t){r.attr("submitting",""),1==t.code?(e("#refresh_modal").modal({backdrop:!1,show:!0}),setTimeout(function(){e("#refresh_modal").modal("hide"),location.reload()},3e3)):(e.logConsole("教师卡补办失败",t.message),e.tipsWarningAlert("教师卡补办失败")),a.button("reset")}))}),e(".teachers-list").on("click",".teachers-delete",function(){var t=e(this);e("#delete_teacherId").val(t.attr("data-id")),e("#delete_modal").modal({backdrop:!1,show:!0})}),e(".confirm-delete").on("click",function(t){t.preventDefault();var a=e("#delete_teacherId").val();e.post("/teachers/lockTeacher",{memberId:a},function(t){1==t.code?location.reload():(e.logConsole("教师删除失败",t.message),e.tipsWarningAlert("教师删除失败"))})})}};t.init()}(jQuery);