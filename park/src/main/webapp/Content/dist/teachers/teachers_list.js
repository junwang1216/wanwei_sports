!function(e){var t={opts:{URL:"/teachers/list"},init:function(){this.initEvents()},initEvents:function(){var t=this;e(".member-filter").on("click",function(a){a.preventDefault();var r=e("#member_filter_form").serialize();location.assign(t.opts.URL+"?"+r)}),e(".page-first, .page-prev, .page-index, .page-next, .page-last").on("click",function(a){a.preventDefault();var r=location.search,o=e(this).attr("data-index");r?r.indexOf("page=")==-1?location.assign(t.opts.URL+"?"+r+"&page="+o):location.assign(t.opts.URL+"?"+r.replace(/(page=)\d+/,"$1"+o)):location.assign(t.opts.URL+"?page="+o)}),e(".teachers-list").on("click",".teachers-refresh",function(){var t=e(this);e("#refresh_cardId").val(t.attr("data-cardId")),e("#refresh_cardNo").val(t.attr("data-cardNo")),e.post("/member/getNewCardNo",function(t){var a=t.data;1==t.code?e("#refresh_newNo").val(a.newCardNo):(console.log(t.message||"新会员卡号生成失败, 请稍后重试"),alert(t.message||"新会员卡号生成失败, 请稍后重试"))})}),e(".confirm-refresh").on("click",function(t){t.preventDefault();var a=e("#refresh_form"),r=a.serialize();return""===e("#refresh_cardId").val()?(alert("请先选择会员卡"),!1):!("submitting"==a.attr("submitting")||!a.valid())&&(a.attr("submitting","submitting"),void e.post("/teachers/teacherCardBuBan",r,function(t){a.attr("submitting",""),1==t.code?(e("#refreshModal").modal({backdrop:!1,show:!0}),setTimeout(function(){e("#refreshModal").modal("hide"),location.reload()},3e3)):(console.log(t.message||"教师卡补办失败, 请稍后重试"),alert(t.message||"教师卡补办失败, 请稍后重试"))}))}),e(".teachers-list").on("click",".teachers-delete",function(){var t=e(this);e("#delete_teacherId").val(t.attr("data-id")),e("#deleteModal").modal({backdrop:!1,show:!0})}),e(".confirm-delete").on("click",function(t){t.preventDefault();var a=e("#delete_teacherId").val();e.post("/teachers/lockTeacher",{memberId:a},function(e){1==e.code?location.reload():(console.log(e.message||"教师删除失败, 请稍后重试"),alert(e.message||"教师删除失败, 请稍后重试"))})})}};t.init()}(jQuery);