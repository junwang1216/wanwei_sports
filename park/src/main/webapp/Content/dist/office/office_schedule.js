!function(e){var t={opts:{URL:"/office/schedule"},init:function(){e.datetimepicker.setLocale("zh"),e("#user_schedule_date").datetimepicker({timepicker:!1,lang:"zh",format:"Y-m-d",defaultDate:new Date,minDate:0}),e("#user_schedule_start").datetimepicker({datepicker:!1,format:"H:i",step:30,value:"06:00"}),e("#user_schedule_end").datetimepicker({datepicker:!1,format:"H:i",step:30,value:"22:00"}),this.initEvents()},initEvents:function(){function t(t){e("#schedule_modal").find("#user_schedule_id").val(t.schedulingId||""),e("#schedule_modal").find("#user_schedule_date").val(t.date||""),e("#schedule_modal").find("#user_schedule_start").val(t.startTime||""),e("#schedule_modal").find("#user_schedule_end").val(t.endTime||""),e("#schedule_modal").find("#user_schedule_operator").val(t.operatorId||""),e("#schedule_modal").find("#user_schedule_job").val(t.schedulingJob||"")}var i=this;e(".data-filter").on("click",function(t){t.preventDefault();var a=e("#data_form").serialize();location.assign(i.opts.URL+"?"+a)}),e(".add-schedule").on("click",function(e){e.preventDefault(),t({})}),e(".edit-schedule").on("click",function(i){i.preventDefault();var a=e(this).attr("data-id");e.post("office/scheduleInfo",{schedulingId:a},function(e){var i=e.data;1==e.code?t(i):(console.log(e.message||"查询值班详情失败, 请稍后重试"),alert(e.message||"查询值班详情失败, 请稍后重试"))})}),e("#user_schedule_submit").on("click",function(t){t.preventDefault();var i=e("#user_schedule_form"),a=i.serialize();return!("submitting"===i.attr("submitting")||!i.valid())&&(i.attr("submitting","submitting"),void e.post("office/saveSchedule",a,function(t){i.attr("submitting",""),1==t.code?(e("#tips_modal").modal({backdrop:!1,show:!0}),setTimeout(function(){e("#tips_modal").modal("hide"),location.reload()},3e3)):alert(t.message||"值班信息保存失败, 请稍后重试")}))})}};t.init()}(jQuery);