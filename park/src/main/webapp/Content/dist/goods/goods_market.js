!function(t){var o={opts:{data:{}},calCartCount:function(){var t,o=this.opts.data,a=0;for(t in o)a+=o[t].goodCount;return a},init:function(){this.initEvents();var o=location.search.replace("?goodType=","");t(".good-type-list").find('[data-type="'+o+'"]').addClass("btn-warning").removeClass("btn-primary")},initEvents:function(){var o=this,a=t(".goods-buy-list"),n=t(".good-cart-count");a.on("click",".good-cart-add",function(a){a.preventDefault();var d=t(this),i=d.attr("data-id");o.opts.data[i]||(o.opts.data[i]={goodId:i,name:d.parents(".goods-list-item").find(".good-name").attr("data-text"),price:d.parents(".goods-list-item").find(".good-price").attr("data-text"),url:d.parents(".goods-list-item").find(".good-image").attr("src"),goodCount:0}),o.opts.data[i].goodCount++,n.find(".badge").html(o.calCartCount()),t.post("/good/addGoodsToCart",{goodId:i,amount:1},function(t){1!=t.code&&(alert(t.message||"添加购物车失败, 请稍后重试"),console.log(t.message||"添加购物车失败, 请稍后重试"))})}),n.on("click",function(t){t.preventDefault(),location.assign("/good/getGoodsCart")})}};o.init()}(jQuery);