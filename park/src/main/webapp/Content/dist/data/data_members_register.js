!function(e){var t={opts:{URL:"/data/getMembersRegister"},init:function(){this.initEvents(),e.datetimepicker.setLocale("zh"),e("#createTimeStart").datetimepicker({timepicker:!1,lang:"zh",format:"Y-m-d",defaultDate:new Date}),e("#createTimeEnd").datetimepicker({timepicker:!1,lang:"zh",format:"Y-m-d",defaultDate:new Date}),this.renderMemberCountCharts(),this.renderMemberStoredCharts(),this.renderMemberConsumeCharts()},initEvents:function(){var t=this;e(".data-filter").on("click",function(r){r.preventDefault();var a=e("#data_form").serialize();location.assign(t.opts.URL+"?"+a)})},renderMemberCountCharts:function(){function t(e){for(var t=[],r=0;r<e.length;r++)t.push({name:e[r].cardTypeName,value:e[r].cardTypeTotal});return t}function r(e){return{backgroundColor:"#FFFFFF",title:{text:"总数量",x:"center",y:"center",textStyle:{fontWeight:"normal",fontSize:16}},tooltip:{show:!0,trigger:"item",formatter:"{b}<br>数量：{c}<br>比率：{d}%"},series:[{type:"pie",selectedMode:"single",radius:["40%","90%"],color:["#59ADF3","#FF999A","#FFCC67"],label:{normal:{position:"inner",formatter:"{b}\n{d}%",textStyle:{color:"#fff",fontWeight:"bold",fontSize:14}}},labelLine:{normal:{show:!1}},data:e}]}}e.post("/data/getMembersRegister",{},function(e){var a=e.data;if(1==e.code){var n=t(a.memberCount),o=echarts.init(document.getElementById("member_count_chart"));o.setOption(r(n))}})},renderMemberStoredCharts:function(){function t(e){for(var t=[],r=0;r<e.length;r++)t.push({name:e[r].cardTypeName,value:e[r].cardTypeTotal});return t}function r(e){return{backgroundColor:"#FFFFFF",color:["#59ADF3","#FF999A","#FFCC67"],tooltip:{trigger:"item",formatter:"{b}:{c}元"},grid:{left:60,top:10},xAxis:{type:"category",data:["最高","同比","当前"],axisLine:{onZero:!1,lineStyle:{width:3}},axisTick:{show:!1},axisLabel:{margin:10,textStyle:{fontWeight:"bold"}},offset:1},yAxis:{type:"value",axisTick:{show:!1},nameRotate:0,axisLine:{onZero:!1,lineStyle:{width:3}},axisLabel:{margin:10,textStyle:{fontWeight:"bold"},formatter:"{value}元"}},series:[{type:"bar",data:[36,20,24],itemStyle:{normal:{color:function(e){var t=["#59ADF3","#FF999A","#FFCC67"];return t[e.dataIndex]}}},barMaxWidth:"40px",label:{normal:{show:!0,position:"top",formatter:"{c}元"}}}]}}e.post("/data/getMembersRegister",{},function(e){var a=e.data;if(1==e.code){var n=t(a.memberCount),o=echarts.init(document.getElementById("member_stored_chart"));o.setOption(r(n))}})},renderMemberConsumeCharts:function(){function t(e){for(var t=[],r=0;r<e.length;r++)t.push({name:e[r].cardTypeName,value:e[r].cardTypeTotal});return t}function r(e){return{color:["#59ADF3","#FF999A","#FFCC67"],tooltip:{trigger:"item",formatter:"{b} <br/>金额：{c}元 <br/>比率：{d}%)"},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[{name:"金额",type:"pie",radius:"90%",center:["50%","50%"],data:[{value:300,name:"场租"},{value:600,name:"商品"},{value:200,name:"余额"}],label:{normal:{position:"inner",formatter:"{b}\n{d}%",textStyle:{color:"#fff",fontWeight:"bold",fontSize:14}}},labelLine:{normal:{show:!1}}}]}}e.post("/data/getMembersRegister",{},function(e){var a=e.data;if(1==e.code){var n=t(a.memberCount),o=echarts.init(document.getElementById("member_consume_chart"));o.setOption(r(n))}})}};t.init()}(jQuery);