!function(e){var t={init:function(){this.initEvents(),e.post("/member/getNewCardNo",function(t){var r=t.data;1==t.code?e("#newCardNo").val(r.newCardNo):alert(t.message||"新会员卡号生成失败, 请稍后重试")})},initEvents:function(){e(".member-card-filter").on("click",function(t){t.preventDefault();var r=e("#member_card_form"),i=r.serialize();return!!r.valid()&&void location.assign("/member/getMembersCardRefresh?"+i)}),e(".refresh-card-submit").on("click",function(t){t.preventDefault();var r=e("#refresh_card_form"),i=r.serialize();return""===e("#refresh_cardId").val()?(alert("请先选择会员卡"),!1):!("submitting"==r.attr("submitting")||!r.valid())&&(r.attr("submitting","submitting"),void e.post("/member/memberCardBuBan",i,function(e){r.attr("submitting",""),1==e.code?alert("会员补办成功"):alert(e.message||"会员补办失败, 请稍后重试")}))})}};t.init()}(jQuery);