!function(e){var r={init:function(){this.initEvents(),e.post("/member/getNewCardNo",function(r){var t=r.data;1==r.code?e("#newCardNo").val(t.newCardNo):alert(r.message||"新会员卡号生成失败, 请稍后重试")})},initEvents:function(){e(".member-card-filter").on("click",function(r){r.preventDefault();var t=e("#member_card_form"),a=t.serialize();return!!t.valid()&&void e.post("member/searchMember",a,function(e){var r=e.data;1==e.code?r&&r.members&&r.members.length>0?location.assign("/member/getMembersCardRefresh?cardNo="+r.members[0].cardNo):alert("没有搜索到会员"):alert("搜索会员失败, 请稍后重试")})}),e(".refresh-card-submit").on("click",function(r){r.preventDefault();var t=e("#refresh_card_form"),a=t.serialize();return""===e("#refresh_cardId").val()?(alert("请先选择会员卡"),!1):!("submitting"==t.attr("submitting")||!t.valid())&&(t.attr("submitting","submitting"),void e.post("/member/memberCardBuBan",a,function(e){t.attr("submitting",""),1==e.code?alert("会员补办成功"):alert(e.message||"会员补办失败, 请稍后重试")}))})}};r.init()}(jQuery);