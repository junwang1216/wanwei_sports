!function(e){var t={opts:{ToURL:"/member/membersInfoCar"},init:function(){e.datetimepicker.setLocale("zh"),e("#member_birthday").datetimepicker({timepicker:!1,lang:"zh",format:"Y-m-d",defaultDate:new Date,maxDate:0}),e(".member-birthday-select").on("click",function(t){t.preventDefault(),e("#member_birthday").datetimepicker("show")}),this.initEvents()},initEvents:function(){var t=this;e("#member_idcard").on("change",function(t){t.preventDefault();var i=e(this).val();e("#member_birthday").val(i.replace(/\d{6}(\d{4})(\d{2})(\d{2})\d{4}/,"$1-$2-$3")),e("[name='memberSex'][value='"+i.replace(/\d{16}(\d{1})\d{1}/,"$1")+"']").prop("checked",!0)}),e(".register-member").on("click",function(i){i.preventDefault();var a=e("#member_form"),r=a.serialize();return!("submitting"===a.attr("submitting")||!a.valid())&&(a.attr("submitting","submitting"),void e.post("member/saveMember",r,function(i){var r=i.data;a.attr("submitting",""),1==i.code?(e("#tips_modal").modal({backdrop:!1,show:!0}),setTimeout(function(){e("#tips_modal").modal("hide"),location.assign(t.opts.ToURL+"?memberId="+r.memberId)},3e3)):alert(i.message||"会员信息保存失败, 请稍后重试")}))})}};t.init()}(jQuery);