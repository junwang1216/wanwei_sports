!function(t){var e={opts:{URL:"/member/getInvoices"},init:function(){this.initEvents()},initEvents:function(){var e=this;t(".ticket-filter").on("click",function(i){i.preventDefault();var n=t("#ticket_filter_form").serialize();location.assign(e.opts.URL+"?"+n)}),t(".page-first, .page-prev, .page-index, .page-next, .page-last").on("click",function(i){i.preventDefault();var n=location.search,a=t(this).attr("data-index");n?n.indexOf("page=")==-1?location.assign(e.opts.URL+"?"+n+"&page="+a):location.assign(e.opts.URL+"?"+n.replace(/(page=)\d+/,"$1"+a)):location.assign(e.opts.URL+"?page="+a)}),t(".ticket-print").on("click",function(e){e.preventDefault();var i=t(this),n=t("[name='ticket_id']:checked");if(0===n.size())return alert("请选择已领取的发票");if("working"==i.attr("working"))return!1;i.attr("working","working");for(var a=[],o=0;o<n.size();o++)a.push(n.eq(o).val());t.post("/member/updateGetInvoices",{invoiceIds:a.join(",")},function(t){i.attr("working",""),1==t.code?location.reload():alert(t.message||"发票状态改变失败, 请稍后重试")})})}};e.init()}(jQuery);