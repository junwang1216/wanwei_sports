!function(e){var t={opts:{URL:"/member/getInvoices"},init:function(){this.initEvents()},initEvents:function(){var t=this;e(".ticket-filter").on("click",function(i){i.preventDefault();var n=e("#ticket_filter_form").serialize();location.assign(t.opts.URL+"?"+n)}),e(".page-first, .page-prev, .page-index, .page-next, .page-last").on("click",function(i){i.preventDefault();var n=location.search,o=e(this).attr("data-index");n?n.indexOf("page=")==-1?location.assign(t.opts.URL+"?"+n+"&page="+o):location.assign(t.opts.URL+"?"+n.replace(/(page=)\d+/,"$1"+o)):location.assign(t.opts.URL+"?page="+o)}),e(".ticket-print").on("click",function(t){t.preventDefault();var i=e(this),n=e("[name='ticket_id']:checked");if(0===n.size())return alert("请选择已领取的发票");if("working"==i.attr("working"))return!1;i.attr("working","working");for(var o=[],a=0;a<n.size();a++)o.push(n.eq(a).val());e.post("/member/updateGetInvoices",{invoiceIds:o.join(",")},function(t){i.attr("working",""),1==t.code?(e("#loanModal").modal({backdrop:!1,show:!0}),setTimeout(function(){e("#loanModal").modal("hide"),location.reload()},3e3)):(console.log(t.message||"发票状态改变失败, 请稍后重试"),alert(t.message||"发票状态改变失败, 请稍后重试"))})})}};t.init()}(jQuery);