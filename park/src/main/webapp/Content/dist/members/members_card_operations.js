!function(e){var t={init:function(){this.initEvents(),e.post("/member/getNewCardNo",function(t){var a=t.data;1==t.code?e("#newCardNo").val(a.newCardNo):alert(t.message||"新会员卡号生成失败, 请稍后重试")})},initEvents:function(){function t(t){e.post("/member/getMemberCarType",{cardTypeId:t},function(t){var a=t.data;1==t.code?(e("#upgrade_cost").val(a.cardTypeMoney),e("#upgrade_discount").val(a.cardTypeDiscount),e("#upgrade_deadline").val(a.cardDeadline)):alert("卡类型信息查询失败, 请稍后重试")})}e(".member-card-filter").on("click",function(t){t.preventDefault();var a=e("#member_card_form"),r=a.serialize();location.assign("/member/getOperations?"+r)}),e(".tab-card").on("click",function(t){t.preventDefault();var a=e(this);a.hasClass("btn-warning")||(e(".tab-card.btn-warning").removeClass("btn-warning").addClass("btn-primary"),a.addClass("btn-warning").removeClass("btn-primary"),e(".refresh-card-panel").hide(),e(".recharge-card-panel").hide(),e(".upgrade-card-panel").hide(),e("."+a.attr("data-tab")+"-panel").show())}),e(".refresh-card-submit").on("click",function(t){t.preventDefault();var a=e("#refresh_card_form"),r=a.serialize();return!("submitting"==a.attr("submitting")||!a.valid())&&(a.attr("submitting","submitting"),void e.post("/member/memberCardBuBan",r,function(e){a.attr("submitting",""),1==e.code?alert("会员补办成功"):alert(e.message||"会员补办失败, 请稍后重试")}))}),e(".recharge-card-submit").on("click",function(t){t.preventDefault();var a=e("#recharge_card_form"),r=a.serialize();return!("submitting"==a.attr("submitting")||!a.valid())&&(a.attr("submitting","submitting"),void e.post("/member/memberCardCZ",r,function(e){a.attr("submitting",""),1==e.code?alert("会员充值成功"):alert(e.message||"会员充值失败, 请稍后重试")}))}),e("[name='cardTypeId']").on("change",function(a){a.preventDefault();var r=e(this).val();t(r)}),e("[name='cardTypeId']").change(),e(".upgrade-card-submit").on("click",function(t){t.preventDefault();var a=e("#upgrade_card_form"),r=a.serialize();return!("submitting"==a.attr("submitting")||!a.valid())&&(a.attr("submitting","submitting"),void e.post("/member/memberCardUpLevel",r,function(e){a.attr("submitting",""),1==e.code?alert("会员升级成功"):alert("会员升级失败, 请稍后重试")}))})}};t.init()}(jQuery);