!function(e){var t={init:function(){this.initEvents()},initEvents:function(){function t(t){e.post("/member/getMemberCarType",{cardTypeId:t},function(t){var a=t.data;1==t.code?(e("#upgrade_cost").val(a.cardTypeMoney+"元"),e("#upgrade_discount").val(a.cardTypeDiscount+"折"),e("#upgrade_deadline").val(a.cardDeadline)):alert("卡类型信息查询失败, 请稍后重试")})}e(".member-card-filter").on("click",function(t){t.preventDefault();var a=e("#member_card_form"),r=a.serialize();return!!a.valid()&&void location.assign("/member/getMembersCardUpgrade?"+r)}),e("[name='cardTypeId']").on("change",function(a){a.preventDefault();var r=e(this).val();t(r)}),e("[name='cardTypeId']").change(),e(".upgrade-card-submit").on("click",function(t){t.preventDefault();var a=e("#upgrade_card_form"),r=a.serialize();return""===e("#upgrade_cardId").val()?(alert("请先选择会员卡"),!1):!("submitting"==a.attr("submitting")||!a.valid())&&(a.attr("submitting","submitting"),void e.post("/member/memberCardUpLevel",r,function(e){a.attr("submitting",""),1==e.code?alert("会员升级成功"):alert("会员升级失败, 请稍后重试")}))})}};t.init()}(jQuery);